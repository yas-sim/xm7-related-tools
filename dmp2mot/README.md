# 当時ホームページに載せていた内容をマークダウン用に修正
---
★ダンプ形式テキストファイルをMotorola-S形式に変換するツール dmp2mot


== 説明 ==

dmp2motは、ダンプリスト(なつかしいアレです)形式で保存されたテキストファイルを読み取り、Motorola-S形式に変換するツールです。

これを使えば、昔の雑誌のダンプリストをスキャナで取り込み、XM7にマシン語として渡すことが可能になります(要FTOOLS)。

OCRソフト特有の読み違い(0:ゼロ→O:オー)などを自動修正する機能も持っています(v0.1から)


[dmp2mot](bin/d2m_01.zip) v0.1 ダウンロード (23KB)


== 使用方法 ==


書式： `dmp2mot infile outfile [options]`

infile : 入力ファイル(ダンプ形式のテキストファイル)
outfile: 出力ファイル(Motorola-Sフォーマット)

|||
|-|-|
|-s|チェックサム有り(デフォルトはチェックサム無し<br>チェックサム値のチェックも有効になります。|
|-v|Verboseモード<br>自動文字修正後の結果を表示|

チェックサムつきのダンプファイルの時は'-s'オプションを指定してください。そうしないと、行の最後の数値(つまりチェックサム)もデータとして保存されてしまいます。

入力ファイルにはデータ以外の行が('ADDR +0 +1…'などの行)が混じっていても大丈夫です。dmp2motは、行の最初の単語に16進以外の文字が含まれる行は処理しません。'ADDR'の場合、'R'が含まれているので読み飛ばされます。


== 変換テーブルファイル ==

v0.1から実装されている、OCR特有の誤認識文字自動置換機能用の変換テーブルファイルについて説明します。DMP2MOTは'cnvtbl.txt'というファイルを変換テーブルとみなし、内容を読み込み、それに基づき変換を行います。

・変換テーブル内の書式

|||
|-|-|
|c|string|
|c|変換文字|
|string|変換対象文字|

変換対象文字を発見した場合、変換文字に置換します。お使いのOCRソフトの癖にあわせて編集してください。

・cnvtbl.txtの例
```
0 ０.。oOｏＯ○◎（）()
1 １Il|１t
2 ２
3 ３
4 ４
5 ５SＳ
6 ６
7 ７フ                       ←'7'でも'フ'でも'7'に変換されます
8 ８
9 ９
A Ａ
B Ｂ
C Ｃ
D Ｄ
E Ｅ
F Ｆ
  二＝:：=        ←スペースに変換されます(無視したい文字を指定すると便利です)
+ *＋＊・
```

== 実行例 ==
```sh
C:\>dmp2mot test.dmp test.mot -s
Dump file to Motorola-S converter v0.0
Check sum error at $5050    ←チェックサムエラーがあった場合に表示される(-sオプション指定時のみ)
```

== FTOOLSとの連携 ==

dmp2motは私のHP(つまりココ)で公開しているFTOOLSというユーティリティー郡とともに併用することを前提に作られています。FTOOLSはXM7で利用できるディスクイメージファイルであるD77形式ファイルにWindowsのDOS窓からファイルを書き込んだり、ファイルを読み出したりすることができるツールです。

冒頭にも書きましたが、昔の雑誌のダンプリストなどをスキャナで取り込み、XM7に渡すことができるようになります。

詳細は、KnowHowの「[ダンプリストをOCRで取り込む](http://retropc.net/apollo/knowhow/dump/index.htm)」をご覧ください。


== その他(余談) ==

ほんとはこの手のプログラムはperlで組んじゃうほうが楽なんですが、使うためにわざわざperlをインストールしてくださいというのもなんですのでCで組みました。perlって便利ですよね。。。


== 変更履歴 ==

v0.0 2000/5/21 新規作成
ｖ0.1 2000/5/27 OCR誤認識文字自動置換機能を追加